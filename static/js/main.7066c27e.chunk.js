(this["webpackJsonpbittensor-network-explorer"]=this["webpackJsonpbittensor-network-explorer"]||[]).push([[0],{268:function(t,e,n){t.exports={contents:"styles_contents__1RGbF",datagrid:"styles_datagrid__1xR_M",chart:"styles_chart__29UPs"}},290:function(t,e,n){t.exports={header:"styles_header__KI8xt",logo:"styles_logo__1x4uj"}},365:function(t,e,n){},366:function(t,e,n){t.exports={"ag-root-wrapper":"styles_ag-root-wrapper__ikBDm",gridContainer:"styles_gridContainer__1iCcw"}},390:function(t,e,n){},391:function(t,e,n){},394:function(t,e){},404:function(t,e){},405:function(t,e){},734:function(t,e,n){"use strict";n.r(e);var r=n(21),a=n.n(r),i=n(151),s=n.n(i),o=(n(390),n(367)),u=n(51),c=(n(391),n(24)),l=n.n(c),p=n(37),d=n(2),h=n(290),f=n.n(h),b=n(47),g=function(){return Object(b.jsx)("header",{className:f.a.header,children:Object(b.jsx)("img",{className:f.a.logo,src:"/logo.png",alt:""})})},v=n(268),k=n.n(v),m=n(7),y=n(13),w=n(752),x=n(751),j={Balance:"u64",NeuronMetadataOf:{version:"u32",ip:"u128",port:"u16",ip_type:"u8",uid:"u32",modality:"u8",hotkey:"AccountId",coldkey:"AccountId",active:"u32",last_update:"u64",stake:"u64",trust:"u64",rank:"u64",consensus:"u64",incentive:"u64",emission:"u64",dividends:"u64",bonds:"Vec<(u32, u64)>",weights:"Vec<(u32, u32)>"}},O={Balance:"u64",NeuronMetadataOf:{version:"u32",ip:"u128",port:"u16",ip_type:"u8",uid:"u32",modality:"u8",hotkey:"AccountId",coldkey:"AccountId",active:"u32",last_update:"u64",priority:"u64",stake:"u64",trust:"u64",rank:"u64",consensus:"u64",incentive:"u64",emission:"u64",dividends:"u64",bonds:"Vec<(u32, u64)>",weights:"Vec<(u32, u32)>"}},_="ws://main.akatsuki.bittensor.com:9944",C=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Object(m.a)(this,t),this.network=e,this.chain_endpoint=this.getEndpoint(n),this.wsProvider=null,this.api=null,this.dismissNewBlock=null,this.dataType=this.getDataType(n)}return Object(y.a)(t,[{key:"getEndpoint",value:function(t){return""===t||"akatsuki"===t?_:"nobunaga"===t?"ws://staging.nobunaga.opentensor.ai:9944":"nakamoto"===t?"ws://entrypointnetworkloadbalancer-21fe5fbdc08425ca.elb.us-east-2.amazonaws.com:9944":_}},{key:"getDataType",value:function(t){return"nobunaga"===t||"nakamoto"===t?O:j}},{key:"connect",value:function(){var t=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.wsProvider=new w.a(this.chain_endpoint),t.next=3,x.a.create({provider:this.wsProvider,types:this.dataType});case 3:this.api=t.sent;case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"get_current_block",value:function(){var t=Object(p.a)(l.a.mark((function t(){var e;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.rpc.chain.getHeader();case 2:return e=t.sent,t.abrupt("return",parseInt(e.number.toString()));case 4:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"get_n",value:function(){var t=Object(p.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.query.subtensorModule.n();case 2:return n=t.sent,t.abrupt("return",parseInt(n.toString()));case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"neurons",value:function(){var t=Object(p.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Array.from({length:e},(function(t,e){return e})),t.abrupt("return",this.api.query.subtensorModule.neurons.multi(n));case 2:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getBlockHash",value:function(){var t=Object(p.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.rpc.chain.getBlockHash(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"getLastBlock",value:function(){var t=Object(p.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.rpc.chain.getHeader();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}()},{key:"neurons_by_uid",value:function(){var t=Object(p.a)(l.a.mark((function t(e){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.query.subtensorModule.neurons(e);case 2:return n=t.sent,t.abrupt("return",n);case 4:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"registerNewBlockCallback",value:function(){var t=Object(p.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.api.rpc.chain.subscribeNewHeads((function(t){e(t)}));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),S=parseFloat("1000000000"),N=parseFloat("4294967295"),I=parseFloat("18446744073709551615"),A=function(){function t(e){Object(m.a)(this,t),this.subtensor=e,this.clear()}return Object(y.a)(t,[{key:"clear",value:function(){this.stake=[],this.ranks=[],this.incentive=[],this.consensus=[],this.trust=[],this.dividends=[],this.bonds=[],this.weights=[],this.version=[],this.n=[],this.tau=[],this.block=0,this.trust=[],this.emission=[],this.active=[],this.last_update=[],this.endpoints=[],this.uids=0}},{key:"forward",value:function(){}},{key:"sync",value:function(){var t=Object(p.a)(l.a.mark((function t(e){var n,r,a=this,i=arguments;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=i.length>1&&void 0!==i[1]?i[1]:null,r=0,this.block=n,!n){t.next=10;break}return t.next=6,this.subtensor.get_n(n);case 6:r=t.sent,this.subtensor.neurons(n).then((function(t){var n=a.parseMetagraph(r,t);e(n)})),t.next=17;break;case 10:return t.next=12,this.subtensor.get_current_block();case 12:return this.block=t.sent,t.next=15,this.subtensor.get_n();case 15:r=t.sent,this.subtensor.neurons(r).then((function(t){var n=a.parseMetagraph(r,t);e(n)}));case 17:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"parseMetagraph",value:function(t,e){var n=this,r=Array.from({length:t},(function(t,e){return e})),a=Array(t).fill(0),i=Array(t).fill(0),s=Array(t).fill(0),o=Array(t).fill(0),u=Array(t).fill(0),c=Array(t).fill(0),l=Array(t).fill(0),p=Array(t).fill(-1),d=new Array(t).fill(0).map((function(){return new Array(t).fill(0)})),h=new Array(t).fill(0).map((function(){return new Array(t).fill(0)})),f=new Array(t).fill("");return this.endpoint_objs=new Array(t).fill(null),e.map((function(e){var r=e.uid.toNumber();a[r]=parseInt(e.active.toString()),i[r]=parseFloat(e.stake.toString())/S,s[r]=parseFloat(e.rank.toString())/I,o[r]=parseFloat(e.trust.toString())/I,c[r]=parseFloat(e.incentive)/I,u[r]=parseInt(e.emission.toString())/S,l[r]=parseFloat(e.dividends.toString())/S,p[r]=parseInt(e.last_update.toString());var b,g=e.hotkey.toString();return f[r]=g.length>5?g.substr(g.length-5):g,n.endpoint_objs[r]={version:parseInt(e.version.toString()),hotkey:e.hotkey.toString(),ip_type:parseInt(e.ip_type.toString()),ip:(b=parseInt(e.ip.toString()),(b>>>24)+"."+(b>>>16&255)+"."+(b>>>8&255)+"."+(255&b)),port:parseInt(e.port.toString()),modality:parseInt(e.modality.toString()),coldkey:e.coldkey.toString()},e.weights.length>0?(d[r]=new Array(t).fill(0),e.weights.map((function(t,e){return d[r][parseInt(t[0].toString())]=parseFloat(t[1].toString())/N}))):d[r]=[],e.bonds.length>0&&(h[r]=new Array(t).fill(0),e.bonds.map((function(t,e){return h[r][parseInt(t[0].toString())]=parseFloat(t[1].toString())/N}))),!0})),{identifiers:f,uids:r,active:a,stake:i,ranks:s,trust:o,emission:u,dividends:l,last_updates:p,endpoints:this.endpoint_objs,weights:d,bonds:h,incentive:c}}},{key:"registerNewBlockCallback",value:function(){var t=Object(p.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.subtensor.registerNewBlockCallback(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()}]),t}(),D=n(270),B=n(363);var F=function(t){function e(t){this.rowData=[],this.metagraph=t,this.unsubscribeDatagridCallback=null,this.unsubscribeChartCallback=null,this.isDatagridUpdating=!1,this.isChartUpdating=!1}return e.prototype.initialLoad=function(){var t=this;return D.Observable.fromPromise(new Promise((function(e,n){console.log("https://network-explorer-backend-5uzg9.ondigitalocean.app/metagraph"),fetch("https://network-explorer-backend-5uzg9.ondigitalocean.app/metagraph").then((function(t){return t.json()})).then((function(n){console.log(n),t.rowData=n||[],e(Object(B.cloneDeep)(t.rowData))}),(function(t){console.log(t)}))})))},e.prototype.updateNewBlockDatagrid=function(){var t=Object(this);return D.Observable.create((function(e){return console.log("updateNewBlockDatagrid"),setInterval((function(){fetch("https://network-explorer-backend-5uzg9.ondigitalocean.app/metagraph").then((function(t){return t.json()})).then((function(n){var r=n||[],a=[],i=[],s=[];r.map((function(e){return t.rowData.some((function(t){return t.last_updates===e.last_updates}))||(t.rowData.some((function(t){return t.uid===e.uid}))?a.push(e):i.push(e)),!0})),t.rowData.map((function(t){return r.some((function(e){return e.uid===t.uid}))||s.push(t),!0})),t.rowData=r,t.isDatagridUpdating=!1,e.next({add:i,update:a,delete:s})}),(function(t){console.log(t)}))}),"60000"),function(){t.unsubscribeDatagridCallback&&t.unsubscribeDatagridCallback()}}))},e.prototype.updateNewBlockChart=function(){var t=Object(this);return D.Observable.create((function(e){return t.metagraph.registerNewBlockCallback((function(n){t.metagraph.subtensor.get_n().then((function(t){e.next({n_total:t,block:n})}))})).then((function(e){return t.unsubscribeChartCallback=e})),function(){t.unsubscribeChartCallback&&t.unsubscribeChartCallback()}}))},e.prototype.backfillData=function(t){var e=[];return t.uids.forEach((function(n,r){e.push({uid:t.identifiers[r],stake:t.stake[r],rank:t.ranks[r],trust:t.trust[r],incentive:t.incentive[r],dividend:t.dividends[r],emission:t.emission[r],last_updates:t.last_updates[r]})})),e},new e(t)},R=n(271),T=n.n(R),E=n(364),M=n.n(E),P=n(365),z=n.n(P),L=function(t){var e=t||{},n=e.series,a=void 0===n?[]:n,i=e.setChartRef,s=void 0===i?function(){}:i,o=Object(r.useState)(!0),u=Object(d.a)(o,1)[0],c=Object(r.useState)({title:{text:"Real-time Graph of the Network"},chart:{type:"area",renderTo:"container",zoomType:"x",events:{load:function(t){s(t.target)}}},xAxis:{title:{text:"Blocks"},type:"number",alignTicks:!1,tickInterval:1,showLastLabel:!0,endOnTick:!0,labels:{formatter:function(){return this.value}}},yAxis:{title:{text:"Neurons"}},navigator:{xAxis:{labels:{enabled:!1}}},rangeSelector:{buttons:[{count:10,type:"number",text:"10"},{count:50,type:"number",text:"50"},{type:"all",text:"All"}],inputEnabled:!1,selected:0},series:a,legend:{layout:"vertical",align:"left",x:80,verticalAlign:"top",y:55,floating:!0,backgroundColor:T.a.theme&&T.a.theme.legendBackgroundColor||"#FFFFFF"},tooltip:{formatter:function(){return"<b>neurons: ".concat(this.y," </b><br/><b>block number: ").concat(this.x,"</b>")}},credits:{enabled:!1}}),l=Object(d.a)(c,1)[0];return Object(b.jsx)("div",{className:z.a.container,children:Object(b.jsx)(M.a,{constructorType:"stockChart",allowChartUpdate:u,highcharts:T.a,options:l})})},G=n(26),U=n(294),V=n(370),q=n(366),H=n.n(q),K=function(t){var e=t||{},n=e.colOptions,r=void 0===n?[]:n,a=e.onGridReady,i=void 0===a?function(){}:a,s=e.getRowNodeId,o=void 0===s?function(){}:s,u=e.rowBuffer,c=void 0===u?20:u,l=e.paginationPageSize,p=void 0===l?100:l,d=e.cacheOverflowSize,h=void 0===d?2:d,f=e.maxConcurrentDatasourceRequests,g=void 0===f?1:f,v=e.maxBlocksInCache,k=void 0===v?10:v,m=e.infiniteInitialRowCount,y=void 0===m?100:m;return Object(b.jsx)("div",{id:"leaderboard",style:{height:"100%",width:"100%",margin:"0 0"},className:"ag-theme-alpine",children:Object(b.jsx)(U.AgGridReact,{className:H.a.gridContainer,defaultColDef:{flex:1,minWidth:100,resizable:!0,sortable:!0},enableRangeSelection:!0,getRowNodeId:o,modules:V.a,onGridReady:i,rowBuffer:c,paginationPageSize:p,cacheOverflowSize:h,maxConcurrentDatasourceRequests:g,infiniteInitialRowCount:y,maxBlocksInCache:k,children:r.map((function(t,e){return Object(b.jsx)(U.AgGridColumn,Object(G.a)({},t),e)}))})})},J=[{headerName:"UID",field:"uid",cellClass:"cell-number",maxWidth:200},{headerName:"STAKE",field:"stake",cellClass:"cell-number"},{headerName:"RANK",field:"rank",cellClass:"cell-number"},{headerName:"TRUST",field:"trust",cellClass:"cell-number"},{headerName:"INCENTIVE",field:"incentive",cellClass:"cell-number"},{headerName:"DIVIDENDS",field:"dividend",cellClass:"cell-number"},{headerName:"EMISSIONS",field:"emission",cellClass:"cell-number"}],W=function(){var t=Object(r.useState)(null),e=Object(d.a)(t,2),n=e[0],a=e[1],i=Object(r.useState)(null),s=Object(d.a)(i,2),o=s[0],u=s[1],c=Object(r.useState)(null),h=Object(d.a)(c,2),f=h[0],v=h[1],m=Object(r.useState)(null),y=Object(d.a)(m,2)[1],w=Object(r.useState)(null),x=Object(d.a)(w,2),j=x[0],O=x[1],_=function(){var t=Object(p.a)(l.a.mark((function t(){var e,n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new C("","nakamoto"),t.next=3,e.connect();case 3:n=new A(e),a(e),u(n);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=Object(p.a)(l.a.mark((function t(e){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:v(e.api),y(e.columnApi);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();Object(r.useEffect)((function(){if(o&&f){var t=F(o),e=t.initialLoad(),n=t.updateNewBlockDatagrid();t.updateNewBlockChart().subscribe((function(t){var e=t.n_total,n=t.block;N(e,n)})),e.subscribe((function(t){null!=f&&f.setRowData(t),n.subscribe((function(t){null!=f&&(console.log(t),f.applyTransactionAsync(t))}))}))}}),[o,f]),Object(r.useEffect)((function(){_()}),[]);var N=function(){var t=Object(p.a)(l.a.mark((function t(e,r){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e),n&&j&&j.series.forEach((function(t){var n=t.points.length,a=(new Date).getTime();t.points[n-1].y!==parseInt(e)&&(t.addPoint({x:parseInt(r.number.toString()),y:parseInt(e),xLabel:r.number.toString(),time:a},!1,!1),j.redraw(!1))}));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}();function I(){for(var t=[],e=0;e<10;e++)t.push({x:e,y:0,xLabel:"",time:new Date});return t}return Object(b.jsx)(b.Fragment,{children:Object(b.jsxs)("div",{className:k.a.contents,children:[Object(b.jsx)(g,{}),Object(b.jsx)("div",{className:k.a.datagrid,children:Object(b.jsx)(K,{colOptions:J,onGridReady:S,getRowNodeId:function(t){return t.uid}})}),Object(b.jsx)("div",{className:k.a.chart,children:Object(b.jsx)(L,{series:function(){var t=[];return t.push({name:"neurons number:",data:I()}),t}(),setChartRef:O})})]})})};var Q=function(){return Object(b.jsx)(o.a,{children:Object(b.jsx)(u.c,{children:Object(b.jsx)(u.a,{path:"/",component:W})})})},X=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,753)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),i(t),s(t)}))};n(731),n(732),n(733);s.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(Q,{})}),document.getElementById("root")),X()}},[[734,1,2]]]);
//# sourceMappingURL=main.7066c27e.chunk.js.map